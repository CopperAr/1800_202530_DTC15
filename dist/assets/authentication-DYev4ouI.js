import{l as c,m as i,d as u,a as d,s as n,n as m,p as w,r as o,h,t as p}from"./site-footer-DBBnyLh7.js";async function y(a,t){const r=await c(o,a,t);try{const{uid:e,displayName:s}=r.user||{};await i(u(d,"users",e),{uid:e,email:a,displayName:s||null,lastLoginAt:n()},{merge:!0})}catch(e){console.warn("Failed to update lastLoginAt:",e)}return r}async function f(a,t,r){const e=await m(o,t,r);a&&a.trim()&&await w(e.user,{displayName:a.trim()});try{const{uid:s,displayName:l}=e.user||{};await i(u(d,"users",s),{uid:s,email:t,displayName:a&&a.trim()||l||null,createdAt:n(),lastLoginAt:n(),provider:"password"},{merge:!0})}catch(s){console.warn("Failed to create user profile:",s)}return e.user}async function A(){await p(o),window.location.href="index.html"}function N(a){return h(o,a)}function P(a){const t=(a?.code||"").toLowerCase();return{"auth/invalid-credential":"Wrong email or password.","auth/invalid-email":"Please enter a valid email address.","auth/user-not-found":"No account found with that email.","auth/wrong-password":"Incorrect password.","auth/too-many-requests":"Too many attempts. Try again later.","auth/email-already-in-use":"Email is already in use.","auth/weak-password":"Password too weak (min 6 characters).","auth/missing-password":"Password cannot be empty.","auth/network-request-failed":"Network error. Try again."}[t]||"Something went wrong. Please try again."}export{P as authErrorMessage,y as loginUser,A as logoutUser,N as onAuthReady,f as signupUser};
