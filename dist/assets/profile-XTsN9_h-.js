import{f as N,d as w,a as k,u as D,h as P,g as U}from"./site-footer-DBBnyLh7.js";import"./app-BVaraGeR.js";import{logoutUser as F}from"./authentication-DYev4ouI.js";const x=N(),a=document.getElementById("profileView"),E=document.getElementById("editBtn"),B=document.getElementById("signOutBtn"),V=document.getElementById("contactBtn"),l=document.getElementById("editProfileView"),I=document.getElementById("discardEditBtn"),v=document.getElementById("saveButton"),b=document.getElementById("contact-dialog"),T=document.getElementById("closeContactDialog");function c(e,t){e&&e.classList.toggle("d-none",!t)}function d(){P(x,async e=>{if(e){const t=document.getElementById("name-goes-here"),o=document.getElementById("pronouns-goes-here"),s=document.getElementById("city-goes-here"),n=document.getElementById("email-goes-here");try{const i=w(k,"users",e.uid),r=await U(i);if(r.exists()){const C=r.data(),{displayName:u="",email:L="",pronouns:m="",city:g=""}=C;t&&(t.textContent=u||e.displayName||"User"),o&&(o.textContent=m),s&&(s.textContent=g),n&&(n.value=L||e.email);const y=document.getElementById("nameInput"),p=document.getElementById("pronounInput"),f=document.getElementById("cityInput");y&&(y.value=u||""),p&&(p.value=m||""),f&&(f.value=g||"")}else t&&(t.textContent=e.displayName||e.email||"User"),n&&(n.value=e.email||"")}catch(i){console.error("Error getting user document:",i)}}else console.log("No user signed in."),window.location.href="index.html"})}d();E&&E.addEventListener("click",()=>{c(a,!1),c(l,!0)});I&&I.addEventListener("click",()=>{c(l,!1),c(a,!0),d()});v&&v.addEventListener("click",async()=>{const e=x.currentUser;if(!e){alert("No user is signed in. Please log in first.");return}const t=document.getElementById("nameInput").value,o=document.getElementById("pronounInput").value,s=document.getElementById("cityInput").value;try{const n=w(k,"users",e.uid);await D(n,{displayName:t,pronouns:o,city:s}),console.log("User document successfully updated!"),c(l,!1),c(a,!0),d()}catch(n){console.error("Error updating user document:",n),alert("Failed to update profile. Please try again.")}});const h=document.getElementById("copyButton");h&&h.addEventListener("click",function(){const e=document.getElementById("email-goes-here"),t=document.getElementById("feedbackMessage");navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e.value).then(()=>{t.style.display="block",setTimeout(()=>{t.style.display="none"},2e3)}).catch(o=>{console.error("Failed to copy text: ",o),alert("Failed to copy text.")}):(e.select(),document.execCommand("copy"),t.style.display="block",setTimeout(()=>{t.style.display="none"},2e3))});B&&B.addEventListener("click",async()=>{try{await F()}catch(e){console.error("Sign out error:",e),alert("Failed to sign out. Please try again.")}});V.addEventListener("click",()=>{b.showModal()});T.addEventListener("click",()=>{b.close()});
