import{d as f,a as c,o as m,g as h,q as g,b as w,c as y,w as u,e as x}from"./site-footer-DBBnyLh7.js";import{onAuthReady as I}from"./authentication-DYev4ouI.js";function p(s){const e=document.getElementById("quote-goes-here");if(!e)return;function a(t){if(t?.exists()){const o=t.data()||{},i=o.quote||o.quotes||o.text||"";return e.textContent=i,!!i}return!1}const d=f(c,"quotes",s);m(d,t=>{if(!a(t)&&s!=="monday"){const i=f(c,"quotes","monday");m(i,n=>a(n))}},t=>{console.warn("Quote listener error:",t)})}function L(){const s=document.getElementById("name-goes-here");I(async e=>{if(!e){location.href="index.html";return}let a=e.displayName||e.email||"friend";try{const d=f(c,"users",e.uid),t=await h(d);t.exists()&&(a=t.data().displayName||t.data().name||a)}catch(d){console.warn("Failed to read user profile:",d)}s&&(s.textContent=a),q(e.uid)})}async function q(s){const e=document.getElementById("friendsList");if(!e)return;const a=g(x(c,"friendships"),w(y(u("fromUserId","==",s),u("status","==","accepted")),y(u("toUserId","==",s),u("status","==","accepted"))));m(a,async d=>{const t=new Map;d.forEach(n=>{const r=n.data(),l=r.fromUserId===s?r.toUserId:r.fromUserId;t.has(l)?t.get(l).docIds.push(n.id):t.set(l,{friendId:l,docIds:[n.id]})});const o=[];for(const{friendId:n}of t.values()){const r=await E(n);o.push({friendId:n,name:r?.displayName||r?.email||"User"})}if(e.innerHTML="",o.length===0){e.innerHTML='<li class="list-group-item text-muted">No friends yet. Add some to get started.</li>';return}const i=o.slice(0,5);for(const n of i){const r=document.createElement("li");r.className="list-group-item d-flex justify-content-between align-items-center",r.innerHTML=`
        <span>${n.name}</span>
        <span class="badge bg-success rounded-pill">Friend</span>
      `,e.appendChild(r)}if(o.length>5){const n=document.createElement("li");n.className="list-group-item text-center",n.innerHTML=`
        <a href="friends.html" class="text-decoration-none">
          View all friends (${o.length})
        </a>
      `,e.appendChild(n)}})}async function E(s){try{const e=await h(f(c,"users",s));return e.exists()?e.data():null}catch(e){return console.error("Error fetching user data:",e),null}}const D=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];try{const a=(new URLSearchParams(location.search).get("day")||"").toLowerCase()||D[new Date().getDay()]||"tuesday";p(a)}catch{p("tuesday")}L();
